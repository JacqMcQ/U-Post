<!-- homepage.handlebars -->
<section class="container">
  <h1>Blog List</h1>
  <section class="flex-row justify-center">
    {{#each blogs}}
      <div class="blog-post">
        <h2>{{this.title}}</h2>
        <p>{{this.content}}</p>
        <p>Posted by: {{this.user.username}} on {{formatDate this.createdAt}}</p>

        {{#if loggedIn}}
          <section class="comment-section">
            <h3>Leave a Comment</h3>
            <form class="comment-form" data-blog-id="{{this.id}}">
              <textarea class="comment-content" rows="4" placeholder="Write your comment here..." required></textarea>
              <button type="submit" class="btn btn-primary">Submit</button>
            </form>
          </section>
        {{/if}}

        <section class="comments-list">
          <h3>Comments</h3>
          {{#each this.comments as |comment|}}
            <div class="comment">
              <p><strong>{{comment.user.username}}</strong> <span>on {{formatDate comment.createdAt}}</span></p>
              <p>{{comment.content}}</p>
            </div>
          {{/each}}
        </section>
      </div>
    {{/each}}
  </section>
</section>

<script src="/js/comments.js"></script>
